#!/bin/bash
# Prevent direct pushes to trunk/main branches

protected_branches="trunk main master"
current_branch=$(git rev-parse --abbrev-ref HEAD)

for protected in $protected_branches; do
    if [ "$current_branch" = "$protected" ]; then
        echo "❌ Direct push to $protected branch is not allowed!"
        echo ""
        echo "Please create a feature branch:"
        echo "  git checkout -b feat/your-feature"
        echo "  git push origin feat/your-feature"
        echo ""
        echo "Then create a PR for review."
        exit 1
    fi
done

echo "✅ Pushing to $current_branch..."